name: Release Please testing
on:
  push:
    branches:
      - git_changes

# permissions:
#   contents: write
#   pull-requests: write

jobs:
  first-job:
    name: Infrastructure Deployment
    runs-on: ubuntu-latest
    outputs:
      ec2_server_ip: ${{steps.test-variable.outputs.ec2_server_ip}}
    steps:
      - name: Checkout
        uses: actions/checkout@v3

      - name: Get Terraform Backup Files
        id: test-variable
        run: |
          echo "ec2_server_ip=dhyey" >> $GITHUB_OUTPUT

      - name: conditional job
        run: |
          if git diff --quiet --exit-code ${{ github.sha }}^ ${{ github.sha }} -- pages/; then
            echo "No changes in 'pages/' directory. Skipping conditional job."
          else
            echo "Changes detected in 'pages/' directory. Running conditional job."
          fi

      - name: conditional job
        if: |
          content(git diff --quiet --exit-code ${{ github.sha }}^ ${{ github.sha }} -- pages/)
        run: |
          echo "conditional job"

  second-job:
    name: running second job
    runs-on: ubuntu-latest
    needs:
      - first-job
    steps:
      - name: Checkout
        uses: actions/checkout@v3

      - name: testing output variable
        env:
          output_variable: ${{ needs.first-job.outputs.ec2_server_ip }}
        run: |
          echo ${{ needs.first-job.outputs.ec2_server_ip }}

# permissions:
#   contents: write
#   pull-requests: write

# jobs:
#   slackNotification:
#     name: Slack Notification
#     runs-on: ubuntu-latest
#     steps:
#     - uses: actions/checkout@v2
#     - name: Slack Notification
#       uses: rtCamp/action-slack-notify@v2
#       env:
#         # SLACK_WEBHOOK: ${{ secrets.SLACK_WEBHOOK }}
#         SLACK_CHANNEL: random
#         SLACK_USERNAME: dhyey

# jobs:
#   spell-check:
#     name: spell check
#     runs-on: ubuntu-latest
#     steps:
#       - uses: actions/checkout@v3

#       - name: check-spelling
#         id: spelling
#         uses: check-spelling/check-spelling@main
#         with:
#           extra_dictionaries:
#             ./en-custom.txt
#             cspell:software-terms/dict/softwareTerms.txt
#             cspell:npm/dict/npm.txt
#             cspell:typescript/dict/typescript.txt
#             cspell:node/dict/node.txt

      # - uses: wow-actions/spell-checker@v1
      #   with:
      #     GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
      #     include: **/*.md

      # - uses: rojopolis/spellcheck-github-actions@0.35.0
      #   name: Spellcheck
      #   with:
      #     config: ./spellcheck.yaml
